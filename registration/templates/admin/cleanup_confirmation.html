{% extends "admin/base_site.html" %}
{% load static %}

{% block title %}{{ title }} - Confirmation{% endblock %}

{% block content %}
<div class="cleanup-confirmation" style="max-width: 800px; margin: 20px auto; padding: 20px;">
    
    <div class="alert alert-warning" style="background: #fff3cd; border: 1px solid #ffeaa7; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
        <h2 style="color: #856404; margin-bottom: 10px;">âš ï¸ {{ title }}</h2>
        <p style="color: #856404; font-size: 16px; margin-bottom: 0;">{{ description }}</p>
    </div>

    {% if details %}
    <div class="details-section" style="background: #f8f9fa; padding: 15px; border-radius: 8px; margin-bottom: 20px;">
        <h4 style="color: #495057; margin-bottom: 10px;">ğŸ“‹ What will be deleted:</h4>
        <ul style="color: #6c757d; margin-bottom: 0;">
            {% for detail in details %}
            <li>{{ detail }}</li>
            {% endfor %}
        </ul>
    </div>
    {% endif %}

    {% if preserved %}
    <div class="preserved-section" style="background: #d4edda; padding: 15px; border-radius: 8px; margin-bottom: 20px; border: 1px solid #c3e6cb;">
        <h4 style="color: #155724; margin-bottom: 10px;">âœ… What will be preserved:</h4>
        <ul style="color: #155724; margin-bottom: 0;">
            {% for item in preserved %}
            <li>{{ item }}</li>
            {% endfor %}
        </ul>
    </div>
    {% endif %}

    {% if is_danger %}
    <div class="danger-warning" style="background: #f8d7da; border: 2px solid #f5c6cb; padding: 20px; border-radius: 8px; margin-bottom: 20px; text-align: center;">
        <h3 style="color: #721c24; margin-bottom: 15px;">ğŸš¨ DANGER ZONE ğŸš¨</h3>
        <p style="color: #721c24; font-size: 18px; font-weight: bold; margin-bottom: 10px;">
            This action cannot be undone!
        </p>
        <p style="color: #721c24; font-size: 14px; margin-bottom: 0;">
            Make sure you have a backup before proceeding.
        </p>
    </div>
    {% endif %}

    <div class="action-buttons" style="text-align: center; margin-top: 30px;">
        <form method="post" style="display: inline-block; margin-right: 15px;">
            {% csrf_token %}
            <button type="submit" 
                    class="btn {{ button_class }}" 
                    style="padding: 12px 30px; font-size: 16px; font-weight: bold; border: none; border-radius: 6px; cursor: pointer; color: white;
                           {% if button_class == 'btn-danger' %}background: #dc3545;{% elif button_class == 'btn-warning' %}background: #fd7e14;{% else %}background: #17a2b8;{% endif %}"
                    onclick="return confirm('Are you absolutely sure? This action cannot be undone!')">
                {{ button_text }}
            </button>
        </form>
        
        <a href="{% url 'admin:index' %}" 
           style="padding: 12px 30px; font-size: 16px; font-weight: bold; border: 2px solid #6c757d; border-radius: 6px; text-decoration: none; color: #6c757d; background: white;">
            Cancel
        </a>
    </div>

    <div class="help-text" style="margin-top: 30px; padding: 15px; background: #e9ecef; border-radius: 8px; text-align: center;">
        <p style="color: #6c757d; font-size: 14px; margin-bottom: 0;">
            ğŸ’¡ <strong>Tip:</strong> You can also use the command line tool <code>exam_admin.bat</code> for more detailed cleanup options with dry-run capabilities.
        </p>
    </div>

</div>

<style>
.btn:hover {
    opacity: 0.9;
    transform: translateY(-1px);
    transition: all 0.2s;
}

.cleanup-confirmation {
    font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
}

.cleanup-confirmation ul {
    padding-left: 20px;
}

.cleanup-confirmation li {
    margin-bottom: 5px;
}
</style>
{% endblock %}
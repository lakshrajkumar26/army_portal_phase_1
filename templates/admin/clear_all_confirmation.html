{% extends "admin/base_site.html" %}
{% load i18n %}

{% block breadcrumbs %}
<div class="breadcrumbs">
<a href="{% url 'admin:index' %}">{% trans 'Home' %}</a>
&rsaquo; <a href="{% url 'admin:app_list' app_label=opts.app_label %}">{{ opts.app_config.verbose_name }}</a>
&rsaquo; <a href="{% url opts|admin_urlname:'changelist' %}">{{ opts.verbose_name_plural|capfirst }}</a>
&rsaquo; {{ title }}
</div>
{% endblock %}

{% block content %}
<h1>{{ title }}</h1>

<div class="module">
    <div class="alert alert-warning" style="background-color: #fff3cd; border: 1px solid #ffeaa7; border-radius: 4px; padding: 15px; margin: 20px 0;">
        <h3 style="color: #856404; margin-top: 0;">
            <strong>‚ö†Ô∏è WARNING: This action cannot be undone!</strong>
        </h3>
        
        {% if action == 'clear_all_data' or action == 'clear_all_candidate_data' %}
            <p style="color: #856404; font-size: 16px; margin: 15px 0;">
                This will <strong>permanently delete ALL candidate records</strong> including:
            </p>
            <ul style="color: #856404; margin-left: 20px;">
                <li>All candidate profiles and personal information</li>
                <li>All exam answers and results</li>
                <li>All exam sessions</li>
                <li>All uploaded photographs</li>
                <li>All assigned exam slots</li>
            </ul>
            <p style="color: #856404; font-weight: bold; font-size: 16px;">
                This action is <strong>IRREVERSIBLE</strong>. Please backup your data before proceeding.
            </p>
        
        {% elif action == 'clear_exam_results' %}
            <p style="color: #856404; font-size: 16px; margin: 15px 0;">
                This will <strong>clear all exam-related data</strong> including:
            </p>
            <ul style="color: #856404; margin-left: 20px;">
                <li>All candidate exam answers</li>
                <li>All exam sessions</li>
                <li>All assigned exam slots (will be reset)</li>
            </ul>
            <p style="color: #856404;">
                Candidate profiles will be preserved, but all exam data will be permanently deleted.
            </p>
        
        {% elif action == 'clear_exam_content' %}
            <p style="color: #856404; font-size: 16px; margin: 15px 0;">
                This will <strong>clear all exam content</strong> including:
            </p>
            <ul style="color: #856404; margin-left: 20px;">
                <li>All questions and question papers</li>
                <li>All question uploads and files</li>
                <li>All trade paper activations</li>
                <li>All exam sessions and exam questions</li>
                <li>All assigned exam slots (will be reset)</li>
            </ul>
            <p style="color: #28a745;">
                Candidate profiles and their results will be preserved, but all exam content will be permanently deleted.
            </p>
        
        {% elif action == 'reset_all_slots' %}
            <p style="color: #856404; font-size: 16px; margin: 15px 0;">
                This will <strong>reset all exam slots</strong> for all candidates:
            </p>
            <ul style="color: #856404; margin-left: 20px;">
                <li>All exam slots will be cleared</li>
                <li>Slot assignment timestamps will be removed</li>
                <li>Slot consumption status will be reset</li>
            </ul>
            <p style="color: #856404;">
                Candidates will need to be assigned new slots before they can take exams.
            </p>
        {% endif %}
    </div>

    <form method="post" onsubmit="return confirm('Are you absolutely sure you want to proceed? This action cannot be undone!');">
        {% csrf_token %}
        <input type="hidden" name="confirm_{{ action }}" value="yes">
        
        <div style="margin: 30px 0;">
            <button type="submit" 
                    style="background-color: #dc3545; color: white; padding: 12px 24px; 
                           border: none; border-radius: 4px; font-size: 16px; font-weight: bold; 
                           cursor: pointer; margin-right: 10px;">
                {% if action == 'clear_all_data' or action == 'clear_all_candidate_data' %}
                    üóëÔ∏è Delete All Candidates
                {% elif action == 'clear_exam_results' %}
                    üßπ Clear Exam Results
                {% elif action == 'clear_exam_content' %}
                    üìã Clear Exam Content
                {% elif action == 'reset_all_slots' %}
                    üîÑ Reset All Slots
                {% endif %}
            </button>
            
            <a href="{{ cancel_url }}" 
               style="background-color: #6c757d; color: white; padding: 12px 24px; 
                      text-decoration: none; border-radius: 4px; font-size: 16px; 
                      display: inline-block; vertical-align: middle;">
                ‚ùå Cancel
            </a>
        </div>
    </form>

    <div class="help" style="margin-top: 30px; padding: 15px; background-color: #f8f9fa; border-radius: 4px;">
        <h4>üí° Recommendation:</h4>
        <p>Before performing this action, consider:</p>
        <ul>
            <li>Exporting your data using the export buttons above</li>
            <li>Creating a database backup</li>
            <li>Testing on a development environment first</li>
        </ul>
    </div>
</div>

<style>
.alert {
    border-left: 4px solid #ffc107;
}
button:hover {
    background-color: #c82333 !important;
}
a:hover {
    background-color: #5a6268 !important;
}
</style>
{% endblock %}
